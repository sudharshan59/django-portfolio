{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ personal.name }} - Portfolio</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}?v=1">
</head>
<body data-bs-spy="scroll" data-bs-target="#navbar" data-bs-offset="70">

<!-- Navbar -->
<nav id="navbar" class="navbar navbar-expand-lg fixed-top bg-black shadow-sm">
    <div class="container">
        <a class="navbar-brand fw-bold text-yellow" href="#hero">PORTFOLIO</a>
        <div class="collapse navbar-collapse justify-content-end">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link text-muted" href="#education">Education</a></li>
                <li class="nav-item"><a class="nav-link text-muted" href="#about">About</a></li>
                <li class="nav-item"><a class="nav-link text-muted" href="#skills">Skills</a></li>
                <li class="nav-item"><a class="nav-link text-muted" href="#projects">Projects</a></li>
                <li class="nav-item"><a class="nav-link text-muted" href="#achievements">Achievements</a></li>
                <li class="nav-item"><a class="nav-link text-muted" href="#contact">Contact</a></li>
            </ul>
        </div>
    </div>
</nav>

<!-- Hero Section -->
<section id="hero" class="d-flex align-items-center justify-content-center text-center py-5">
    <div class="hero-content">
        <div class="profile-container mb-3">
            {% if personal.profile_image %}
                <img src="{{ personal.profile_image.url }}" 
                     class="rounded-circle border border-yellow shadow-lg animate-profile" 
                     style="width: 180px; height: 180px; object-fit: cover;" 
                     alt="Profile">
            {% else %}
                <div class="bg-white rounded-circle d-flex align-items-center justify-content-center" 
                     style="width: 180px; height: 180px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                    <i class="fas fa-user text-dark fs-2"></i>
                </div>
            {% endif %}
        </div>
        <h1 class="display-2 fw-bold text-yellow animate-title" 
            style="font-weight: 800; text-shadow: 0 0 20px rgba(255,215,0,0.7); letter-spacing: 2px;">
            {{ personal.title }}
        </h1>
        <p class="lead text-white animate-subtitle" style="font-size: 1.3rem; max-width: 600px;">
            {{ personal.name }}
        </p>
        <p class="text-muted mt-3 animate-bio" style="font-size: 1.1rem; max-width: 600px;">
            {{ personal.bio }}
        </p>
    </div>
</section>

<main class="container mt-5 pt-5">

    <!-- EDUCATION SECTION -->
    <section id="education" class="mb-5">
        <h2 class="text-center mb-4 section-title">Education</h2>
        <div class="row justify-content-center">
            <div class="col-md-8">
                {% for edu in educations %}
                    <div class="mb-3 p-3 border rounded bg-darker">
                        <h5>{{ edu.degree }}</h5>
                        <p class="text-muted">{{ edu.institution }} • 
                            {{ edu.start_date|date:"Y" }}{% if edu.end_date %}–{{ edu.end_date|date:"Y" }}{% else %}–Present{% endif %}
                        </p>
                        {% if edu.description %}<p>{{ edu.description }}</p>{% endif %}
                    </div>
                {% empty %}
                    <div class="text-center text-muted">No education entries added yet.</div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- ABOUT ME SECTION -->
    <section id="about" class="mb-5">
        <h2 class="text-center mb-4 section-title">About Me</h2>
        <div class="row justify-content-center">
            <div class="col-md-8 text-center">
                <p class="lead mb-4">{{ personal.bio }}</p>
            </div>
        </div>
    </section>

    <!-- SKILLS SECTION -->
    <section id="skills" class="mb-5">
        <h2 class="text-center mb-4 section-title">Skills</h2>
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="row">
                    {% for skill in skills %}
                        <div class="col-md-6 col-lg-4 mb-3">
                            <div class="d-flex align-items-center mb-2">
                                {% if skill.icon %}
                                    <i class="{{ skill.icon }} me-2 fs-4 text-yellow"></i>
                                {% endif %}
                                <span class="fw-bold">{{ skill.name }}</span>
                            </div>
                            <div class="progress" style="height: 8px;">
                                <div class="progress-bar bg-yellow" role="progressbar" style="width: {{ skill.level }}%;"></div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>

    <!-- PROJECTS SECTION -->
    <section id="projects" class="mb-5">
        <h2 class="text-center mb-4 section-title">Projects</h2>
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="row">
                    {% for project in projects %}
                        <div class="col-md-6 col-lg-4 mb-4">
                            <div class="card h-100 bg-darker border border-yellow-light">
                                {% if project.thumbnail %}
                                    <img src="{{ project.thumbnail.url }}" class="card-img-top" style="height: 200px; object-fit: cover;" alt="{{ project.title }}">
                                {% else %}
                                    <div class="bg-dark d-flex align-items-center justify-content-center" style="height: 200px;">
                                        <i class="fas fa-cube fa-3x text-muted"></i>
                                    </div>
                                {% endif %}
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title">{{ project.title }}</h5>
                                    <p class="card-text flex-grow-1">{{ project.description }}</p>
                                    <p class="text-muted small">{{ project.tech_stack }}</p>
                                    <div class="mt-auto">
                                        {% if project.github_link %}
                                            <a href="{{ project.github_link }}" target="_blank" class="btn btn-outline-yellow btn-sm me-2">
                                                <i class="fab fa-github"></i> Code
                                            </a>
                                        {% endif %}
                                        {% if project.live_link %}
                                            <a href="{{ project.live_link }}" target="_blank" class="btn btn-yellow btn-sm">
                                                <i class="fas fa-external-link-alt"></i> Live
                                            </a>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>

    <!-- ACHIEVEMENTS SECTION -->
    <section id="achievements" class="mb-5">
        <h2 class="text-center mb-4 section-title">Achievements</h2>
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="row">
                    {% for ach in achievements %}
                        <div class="col-md-6 col-lg-4 mb-3">
                            <div class="p-3 border rounded bg-darker h-100">
                                <h5>{{ ach.title }}</h5>
                                <p class="text-muted">{{ ach.issuer }} • {{ ach.date_earned|date:"M Y" }}</p>
                                {% if ach.description %}<p>{{ ach.description }}</p>{% endif %}
                                {% if ach.credential_url %}
                                    <a href="{{ ach.credential_url }}" target="_blank" class="btn btn-sm btn-outline-yellow">View Credential</a>
                                {% endif %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>

    <!-- CONTACT SECTION -->
    <section id="contact" class="mb-5">
        <h2 class="text-center mb-4 section-title">Contact</h2>
        <div class="row justify-content-center">
            <div class="col-md-6 text-center">
                <p><i class="fas fa-envelope me-2 text-yellow"></i>{{ personal.email }}</p>
                {% if personal.phone %}
                    <p><i class="fas fa-phone me-2 text-yellow"></i>{{ personal.phone }}</p>
                {% endif %}
                {% if personal.location %}
                    <p><i class="fas fa-map-marker-alt me-2 text-yellow"></i>{{ personal.location }}</p>
                {% endif %}
                <div class="mt-3">
                    {% for contact in contacts %}
                        <a href="{{ contact.url }}" target="_blank" class="btn btn-outline-yellow me-2 mb-2">
                            <i class="{{ contact.icon_class }}"></i> {{ contact.social_platform }}
                        </a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>

</main>

<footer class="text-center py-4 text-white bg-black">
    <p>© {% now "Y" %} {{ personal.name }}. Built with Django & ❤️</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Animate profile on load
    document.addEventListener('DOMContentLoaded', function() {
        const profile = document.querySelector('.animate-profile');
        const title = document.querySelector('.animate-title');
        const subtitle = document.querySelector('.animate-subtitle');
        const bio = document.querySelector('.animate-bio');

        if (profile) {
            profile.style.opacity = '0';
            profile.style.transform = 'scale(0.8)';
            setTimeout(() => {
                profile.style.transition = 'opacity 1s ease, transform 1s ease';
                profile.style.opacity = '1';
                profile.style.transform = 'scale(1)';
            }, 500);
        }

        if (title) {
            title.style.opacity = '0';
            title.style.transform = 'translateY(20px)';
            setTimeout(() => {
                title.style.transition = 'opacity 1s ease, transform 1s ease';
                title.style.opacity = '1';
                title.style.transform = 'translateY(0)';
            }, 700);
        }

        if (subtitle) {
            subtitle.style.opacity = '0';
            subtitle.style.transform = 'translateY(20px)';
            setTimeout(() => {
                subtitle.style.transition = 'opacity 1s ease, transform 1s ease';
                subtitle.style.opacity = '1';
                subtitle.style.transform = 'translateY(0)';
            }, 900);
        }

        if (bio) {
            bio.style.opacity = '0';
            bio.style.transform = 'translateY(20px)';
            setTimeout(() => {
                bio.style.transition = 'opacity 1s ease, transform 1s ease';
                bio.style.opacity = '1';
                bio.style.transform = 'translateY(0)';
            }, 1100);
        }
    });

    // Animate section titles on scroll
    document.addEventListener('scroll', function() {
        const sections = document.querySelectorAll('section');
        sections.forEach(section => {
            const rect = section.getBoundingClientRect();
            if (rect.top <= window.innerHeight * 0.8 && rect.bottom >= 0) {
                const title = section.querySelector('.section-title');
                if (title && !title.classList.contains('animated')) {
                    title.style.opacity = '0';
                    title.style.transform = 'translateY(20px)';
                    setTimeout(() => {
                        title.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
                        title.style.opacity = '1';
                        title.style.transform = 'translateY(0)';
                        title.classList.add('animated');
                    }, 200);
                }
            }
        });
    });
</script>
</body>
</html>